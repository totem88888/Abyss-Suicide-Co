<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Site</title>

  <style>
    body { margin:0; font-family: sans-serif; }
    header {
      position: fixed;
      top:0; left:0; right:0;
      background:#222;
      color:#fff;
      padding:10px;
      display:flex;
      gap:20px;
    }
    .page { padding-top:60px; display:none; }
    .active { display:block; }

    .box {
      max-width:300px;
      margin:90px auto;
      display:flex;
      flex-direction:column;
    }
    .box input { margin:5px 0; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>

</head>
<body>

  <!-- 로그인 -->
  <div id="login-box" class="box">
    <h2>로그인</h2>
    <input id="login-email" placeholder="이메일" />
    <input id="login-password" type="password" placeholder="비밀번호" />
    <button id="login-btn">로그인</button>
    <button id="goto-signup">회원가입</button>
  </div>

  <!-- 회원가입 -->
  <div id="signup-box" class="box" style="display:none;">
    <h2>회원가입</h2>
    <input id="signup-email" placeholder="이메일" />
    <input id="signup-password" type="password" placeholder="비밀번호" />
    <button id="signup-btn">가입 완료</button>
    <button id="goto-login">로그인으로</button>
  </div>

  <!-- 헤더 -->
  <header id="header" style="display:none;">
    <span data-page="status">현황</span>
    <span data-page="intro">소개</span>
    <span data-page="map">맵</span>
    <span data-page="dex">도감</span>
  </header>

  <!-- 내부 페이지 -->
  <div id="status" class="page">현황 페이지</div>
  <div id="intro" class="page">소개 페이지</div>
  <div id="map" class="page">맵 페이지</div>
  <div id="dex" class="page">도감 페이지</div>


<script>
  // ===== 1) Firebase 설정 =====
  const firebaseConfig = {
    apiKey: "AIzaSyDGmwk9FtwnjUKcH4T6alvMWVQqbhVrqfI",
    authDomain: "abyss-suicide-co.firebaseapp.com",
    projectId: "abyss-suicide-co",
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();


  // ===== 2) DOM 요소 =====
  const loginBox = document.getElementById("login-box");
  const signupBox = document.getElementById("signup-box");
  const header = document.getElementById("header");


  // ===== 3) 페이지 표시 =====
  function showPage(name) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(name).classList.add("active");
  }

  header.addEventListener("click", e => {
    const p = e.target.getAttribute("data-page");
    if (p) showPage(p);
  });


  // ===== 4) 로그인 =====
  document.getElementById("login-btn").onclick = () => {
    const email = document.getElementById("login-email").value;
    const pw = document.getElementById("login-password").value;
    auth.signInWithEmailAndPassword(email, pw).catch(console.error);
  };


  // ===== 5) 회원가입 =====
  document.getElementById("signup-btn").onclick = () => {
    const email = document.getElementById("signup-email").value;
    const pw = document.getElementById("signup-password").value;
    auth.createUserWithEmailAndPassword(email, pw).catch(console.error);
  };


  // ===== 6) 로그인 ↔ 회원가입 전환 =====
  document.getElementById("goto-signup").onclick = () => {
    loginBox.style.display = "none";
    signupBox.style.display = "flex";
  };

  document.getElementById("goto-login").onclick = () => {
    signupBox.style.display = "none";
    loginBox.style.display = "flex";
  };


  // ===== 7) 로그인 상태 변경 감지 =====
  auth.onAuthStateChanged(user => {
    if (user) {
      // 로그인했을 때
      loginBox.style.display = "none";
      signupBox.style.display = "none";
      header.style.display = "flex";
      showPage("status");
    } else {
      // 로그아웃 또는 미로그인
      loginBox.style.display = "flex";
      signupBox.style.display = "none";
      header.style.display = "none";
    }
  });

</script>

</body>
</html>
